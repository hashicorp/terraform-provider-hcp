---
page_title: "Resource hcp_vault_cluster - terraform-provider-hcp"
subcategory: ""
description: |-
  The Vault cluster resource allows you to manage an HCP Vault cluster.
---

# hcp_vault_cluster (Resource)

The Vault cluster resource allows you to manage an HCP Vault cluster.

-> **Note:** It is recommended to set `lifecycle { prevent_destroy = true }` on production Vault instances to prevent accidental cluster deletion. This setting rejects plans that would destroy the cluster, such as attempting to change the `hvn_id`. Read more about it in the [Terraform docs](https://www.terraform.io/language/meta-arguments/lifecycle#prevent_destroy).

## Example Usage

```terraform
resource "hcp_hvn" "example" {
  hvn_id         = "hvn"
  cloud_provider = "aws"
  region         = "us-west-2"
  cidr_block     = "172.25.16.0/20"
}

resource "hcp_vault_cluster" "example" {
  cluster_id = "vault-cluster"
  hvn_id     = hcp_hvn.example.hvn_id
  tier       = "standard_large"
  metrics_config {
    datadog_api_key = "test_datadog"
    datadog_region  = "us1"
  }
  audit_log_config {
    datadog_api_key = "test_datadog"
    datadog_region  = "us1"
  }
  lifecycle {
    prevent_destroy = true
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cluster_id` (String) The ID of the HCP Vault cluster.
- `hvn_id` (String) The ID of the HVN this HCP Vault cluster is associated to.

### Optional

- `audit_log_config` (Block List, Max: 1) The audit logs configuration for export. (https://developer.hashicorp.com/vault/tutorials/cloud-monitoring/vault-metrics-guide#metrics-streaming-configuration) (see [below for nested schema](#nestedblock--audit_log_config))
- `major_version_upgrade_config` (Block List, Max: 1) The Major Version Upgrade configuration. (see [below for nested schema](#nestedblock--major_version_upgrade_config))
- `metrics_config` (Block List, Max: 1) The metrics configuration for export. (https://developer.hashicorp.com/vault/tutorials/cloud-monitoring/vault-metrics-guide#metrics-streaming-configuration) (see [below for nested schema](#nestedblock--metrics_config))
- `min_vault_version` (String) The minimum Vault version to use when creating the cluster. If not specified, it is defaulted to the version that is currently recommended by HCP.
- `paths_filter` (List of String) The performance replication [paths filter](https://developer.hashicorp.com/vault/tutorials/cloud-ops/vault-replication-terraform). Applies to performance replication secondaries only and operates in "deny" mode only.
- `primary_link` (String) The `self_link` of the HCP Vault Plus tier cluster which is the primary in the performance replication setup with this HCP Vault Plus tier cluster. If not specified, it is a standalone Plus tier HCP Vault cluster.
- `project_id` (String) The ID of the HCP project where the Vault cluster is located. 
If not specified, the project specified in the HCP Provider config block will be used, if configured.
If a project is not configured in the HCP Provider config block, the oldest project in the organization will be used.
- `proxy_endpoint` (String) Denotes that the cluster has a proxy endpoint. Valid options are `ENABLED`, `DISABLED`. Defaults to `DISABLED`.
- `public_endpoint` (Boolean) Denotes that the cluster has a public endpoint. Defaults to false.
- `tier` (String) Tier of the HCP Vault cluster. Valid options for tiers - `dev`, `starter_small`, `standard_small`, `standard_medium`, `standard_large`, `plus_small`, `plus_medium`, `plus_large`. See [pricing information](https://www.hashicorp.com/products/vault/pricing). Changing a cluster's size or tier is only available to admins. See [Scale a cluster](https://registry.terraform.io/providers/hashicorp/hcp/latest/docs/guides/vault-scaling).
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `cloud_provider` (String) The provider where the HCP Vault cluster is located.
- `created_at` (String) The time that the Vault cluster was created.
- `id` (String) The ID of this resource.
- `namespace` (String) The name of the customer namespace this HCP Vault cluster is located in.
- `organization_id` (String) The ID of the organization this HCP Vault cluster is located in.
- `region` (String) The region where the HCP Vault cluster is located.
- `self_link` (String) A unique URL identifying the Vault cluster.
- `state` (String) The state of the Vault cluster.
- `vault_private_endpoint_url` (String) The private URL for the Vault cluster.
- `vault_proxy_endpoint_url` (String) The proxy URL for the Vault cluster. This will be empty if `proxy_endpoint` is `DISABLED`.
- `vault_public_endpoint_url` (String) The public URL for the Vault cluster. This will be empty if `public_endpoint` is `false`.
- `vault_version` (String) The Vault version of the cluster.

<a id="nestedblock--audit_log_config"></a>
### Nested Schema for `audit_log_config`

Optional:

- `cloudwatch_access_key_id` (String) CloudWatch access key ID for streaming audit logs
- `cloudwatch_region` (String) CloudWatch region for streaming audit logs
- `cloudwatch_secret_access_key` (String, Sensitive) CloudWatch secret access key for streaming audit logs
- `datadog_api_key` (String, Sensitive) Datadog api key for streaming audit logs
- `datadog_region` (String) Datadog region for streaming audit logs
- `grafana_endpoint` (String) Grafana endpoint for streaming audit logs
- `grafana_password` (String, Sensitive) Grafana password for streaming audit logs
- `grafana_user` (String) Grafana user for streaming audit logs
- `splunk_hecendpoint` (String) Splunk endpoint for streaming audit logs
- `splunk_token` (String, Sensitive) Splunk token for streaming audit logs

Read-Only:

- `cloudwatch_group_name` (String) CloudWatch group name of the target log stream for audit logs
- `cloudwatch_stream_name` (String) CloudWatch stream name for the target log stream for audit logs


<a id="nestedblock--major_version_upgrade_config"></a>
### Nested Schema for `major_version_upgrade_config`

Required:

- `upgrade_type` (String) The major upgrade type for the cluster. Valid options for upgrade type - `AUTOMATIC`, `SCHEDULED`, `MANUAL`

Optional:

- `maintenance_window_day` (String) The maintenance day of the week for scheduled upgrades. Valid options for maintenance window day - `MONDAY`, `TUESDAY`, `WEDNESDAY`, `THURSDAY`, `FRIDAY`, `SATURDAY`, `SUNDAY`
- `maintenance_window_time` (String) The maintenance time frame for scheduled upgrades. Valid options for maintenance window time - `WINDOW_12AM_4AM`, `WINDOW_6AM_10AM`, `WINDOW_12PM_4PM`, `WINDOW_6PM_10PM`


<a id="nestedblock--metrics_config"></a>
### Nested Schema for `metrics_config`

Optional:

- `cloudwatch_access_key_id` (String) CloudWatch access key ID for streaming metrics
- `cloudwatch_region` (String) CloudWatch region for streaming metrics
- `cloudwatch_secret_access_key` (String, Sensitive) CloudWatch secret access key for streaming metrics
- `datadog_api_key` (String, Sensitive) Datadog api key for streaming metrics
- `datadog_region` (String) Datadog region for streaming metrics
- `grafana_endpoint` (String) Grafana endpoint for streaming metrics
- `grafana_password` (String, Sensitive) Grafana password for streaming metrics
- `grafana_user` (String) Grafana user for streaming metrics
- `splunk_hecendpoint` (String) Splunk endpoint for streaming metrics
- `splunk_token` (String, Sensitive) Splunk token for streaming metrics

Read-Only:

- `cloudwatch_namespace` (String) CloudWatch namespace for streaming metrics


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `default` (String)
- `delete` (String)
- `update` (String)

-> **Note:** When establishing performance replication links between clusters in different HVNs, an HVN peering connection is required. This can be defined explicitly using an [`hcp_hvn_peering_connection`](hvn_peering_connection.md), or HCP will create the connection automatically (peering connections can be imported after creation using [terraform import](https://www.terraform.io/cli/import)). Note HVN peering [CIDR block requirements](https://cloud.hashicorp.com/docs/hcp/network/routes#cidr-block-requirements).

## Import

Import is supported using the following syntax:

```shell
# Using an explicit project ID, the import ID is:
# {project_id}:{cluster_id}
terraform import hcp_vault_cluster.example f709ec73-55d4-46d8-897d-816ebba28778:vault-cluster
# Using the provider-default project ID, the import ID is:
# {cluster_id}
terraform import hcp_vault_cluster.example vault-cluster
```

## Tutorials

Refer to the following tutorials for additional usage examples:

- [Deploy HCP Vault with Terraform](https://developer.hashicorp.com/vault/tutorials/cloud-ops/terraform-hcp-provider-vault) 
- [Deploy HCP Vault Performance Replication with Terraform](https://developer.hashicorp.com/vault/tutorials/cloud-ops/vault-replication-terraform)