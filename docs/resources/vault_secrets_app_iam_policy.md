---
page_title: "Resource hcp_vault_secrets_app_iam_policy - terraform-provider-hcp"
subcategory: "HCP Vault Secrets"
description: |-
  Sets the Vault Secrets App IAM policy and replaces any existing policy.
---

# hcp_vault_secrets_app_iam_policy (Resource)

!> **Be Careful!** You can accidentally lock yourself out of your vault secrets app using
this resource. Deleting a hcp_vault_secrets_app_iam_policy removes access from anyone
without organization or project level access to the app. This resource should generally only be used with apps fully managed by Terraform.
If you are trying to additively give permissions to the app, prefer using
`hcp_vault_secrets_app_iam_binding`. If you do use this resource, it is recommended to
import the policy before applying the change.

Sets the Vault Secrets App IAM policy and replaces any existing policy.

~> **Note:** `hcp_vault_secrets_app_iam_policy` can not be used in conjunction with
`hcp_vault_secrets_app_iam_binding`.

## Example Usage

```terraform
data "hcp_iam_policy" "example" {
  bindings = [
    {
      role = "roles/secrets.app-secret-reader"
      principals = [
        "example-user-id-1",
        "example-group-id-1",
        "example-sp-1"
      ]
    },
  ]
}


resource "hcp_vault_secrets_app" "example" {
  app_name    = "example-app-name"
  description = "My new app!"
}

resource "hcp_vault_secrets_app_iam_policy" "example" {
  resource_name = hcp_vault_secrets_app.example.resource_name
  policy_data   = data.hcp_iam_policy.example.policy_data
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `policy_data` (String) The policy to apply.
- `resource_name` (String) The app's resource name in the format secrets/project/<project ID>/app/<app Name>.

### Read-Only

- `etag` (String) The etag captures the existing state of the policy.

## Import

Import is supported using the following syntax:

```shell
# Vault Secrets App IAM Policy can be imported by specifying the resource name of the app
terraform import hcp_vault_secrets_app_iam_policy.example secrets/project/41d107a7-eea6-4b5e-8481-508ab29e2b07/app/example-app-name
```