---
page_title: "Resource hcp_group_iam_policy - terraform-provider-hcp"
subcategory: "Cloud Platform"
description: |-
  Sets the group's IAM policy and replaces any existing policy.
---

# hcp_group_iam_policy (Resource)

Sets the group's IAM policy and replaces any existing policy.

~> **Note:** `hcp_group_iam_policy` can not be used in conjunction with
`hcp_group_iam_binding`.

## Example Usage

```terraform
# Fetch a user from HCP
data "hcp_user_principal" "example" {
  email = "user@example.com"
}

# Lookup an existing group in HCP
data "hcp_group" "example" {
  resource_name = "group-name"
}

# Add members to the group
resource "hcp_group_members" "example" {
  group = data.hcp_group.example.resource_name
  members = [
    data.hcp_user_principal.example.user_id
  ]
}

# Create an IAM policy for a group using the group manager role
data "hcp_iam_policy" "example" {
  bindings = [
    {
      role = "roles/iam.group-manager"
      principals = [
        data.hcp_user_principal.example.user_id,
      ]
    },
  ]
}

# Set the IAM policy on a group
resource "hcp_group_iam_policy" "example" {
  resource_name = data.hcp_group.example.resource_name
  policy_data   = data.hcp_iam_policy.example.policy_data
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `policy_data` (String) The policy to apply.
- `resource_name` (String) The group's resource name in format `iam/organization/<organization_id>/group/<group_name>`. The shortened `<group_name>` version can be used for input.

### Read-Only

- `etag` (String) The etag captures the existing state of the policy.

## Import

Import is supported using the following syntax:

```shell
# A Group's IAM Policy can be imported by specifying the group's resource name
terraform import hcp_group_iam_policy.example existing-group
```
