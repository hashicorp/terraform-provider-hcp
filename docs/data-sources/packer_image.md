---
page_title: "Data Source hcp_packer_image - terraform-provider-hcp"
subcategory: "HCP Packer"
description: |-
  The Packer Image data source gets an image associated with an iteration, either from a specific iteration or from the iteration assigned to a given Channel.
---

# hcp_packer_image (Data Source)

The Packer Image data source gets an image associated with an iteration, either from a specific iteration or from the iteration assigned to a given Channel.

## Example Usage

### Single image sourcing

```terraform
data "hcp_packer_image" "baz" {
  bucket_name    = "hardened-ubuntu-16-04"
  cloud_provider = "aws"
  channel        = "production"
  region         = "us-east-1"
}

output "packer-registry-ubuntu-east-1" {
  value = data.hcp_packer_image.baz.cloud_image_id
}
```

~> **Note:** The `channel` attribute in this data source may incur a billable request to HCP Packer. This attribute is intended for convenience when using a single image. When sourcing multiple images from a single iteration, the `hcp_packer_iteration` data source is the alternative for querying a channel just once.

### Multiple image sourcing from a single iteration

```terraform
data "hcp_packer_iteration" "hardened-source" {
  bucket_name = "hardened-ubuntu-16-04"
  channel     = "production"
}

data "hcp_packer_image" "foo" {
  bucket_name    = "hardened-ubuntu-16-04"
  cloud_provider = "aws"
  iteration_id   = data.hcp_packer_iteration.hardened-source.ulid
  region         = "us-east-1"
}

data "hcp_packer_image" "bar" {
  bucket_name    = "hardened-ubuntu-16-04"
  cloud_provider = "aws"
  iteration_id   = data.hcp_packer_iteration.hardened-source.ulid
  region         = "us-west-1"
}

output "packer-registry-ubuntu-east-1" {
  value = data.hcp_packer_image.foo.cloud_image_id
}

output "packer-registry-ubuntu-west-1" {
  value = data.hcp_packer_image.bar.cloud_image_id
}
```

~> **Note:** This data source only returns the first found image's metadata filtered by the given arguments, from the returned list of images associated with the specified iteration. Therefore, if multiple images exist in the same region, it will only pick one of them. In this case, you can filter images by a source build name (Ex: `amazon-ebs.example`) using the `component_type` optional argument.

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `bucket_name` (String) The slug of the HCP Packer Registry bucket where this image is located.
- `cloud_provider` (String) Name of the cloud provider where this image is stored.
- `region` (String) The Region where this image is stored, if any.

### Optional

- `channel` (String) The channel that points to the version of the image being retrieved. Either this or `iteration_id` must be specified. Note: will incur a billable request
- `component_type` (String) Name of the builder that built this image. Ex: `amazon-ebs.example`.
- `iteration_id` (String) The iteration from which to get the image. Either this or `channel` must be specified.
- `project_id` (String) The ID of the HCP project where the HCP Packer Registry image is located.
If not specified, the project specified in the HCP Provider config block will be used, if configured.
If a project is not configured in the HCP Provider config block, the oldest project in the organization will be used.
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `build_id` (String) HCP ID of the build containing this image.
- `cloud_image_id` (String) Cloud Image ID or URL string identifying this image for the builder that built it.
- `created_at` (String) Creation time of this image.
- `id` (String) The ID of this resource.
- `labels` (Map of String) Labels associated with the build containing this image.
- `organization_id` (String) The ID of the organization where this image is located.
- `packer_run_uuid` (String) UUID of the build containing this image.
- `revoke_at` (String) The revocation time of the iteration containing this image. This field will be null for any iteration that has not been revoked or scheduled for revocation.

<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `default` (String)

