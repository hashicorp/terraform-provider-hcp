---
page_title: "Data Source hcp_packer_image - terraform-provider-hcp"
subcategory: ""
description: |-
  The Packer Image data source iteration gets the most recent iteration (or build) of an image, given an iteration id or a channel.
---

# hcp_packer_image (Data Source)

The Packer Image data source iteration gets the most recent iteration (or build) of an image, given an iteration id or a channel.

## Example Usage

### Single image sourcing

```terraform
data "hcp_packer_image" "baz" {
  bucket_name    = "hardened-ubuntu-16-04"
  cloud_provider = "aws"
  channel        = "production"
  region         = "us-east-1"
}

output "packer-registry-ubuntu-east-1" {
  value = data.hcp_packer_image.baz.cloud_image_id
}
```

~> **Note:** The `channel` attribute in this data source may incur a billable request to HCP Packer. This attribute is intended for convenience when using a single image. When sourcing multiple images from a single iteration, the `hcp_packer_iteration` data source is the alternative for querying a channel just once.

~> **Note:** This data source only returns the first found image's metadata filtered by the given arguments, from the returned list of images associated with the specified iteration. Therefore, if multiple images exist in the same region, it will only pick one of them. In this csae, you can filter images by a source build name (Ex: `amazon-ebs.example`) using the `component_type` optional argument.

### Multiple image sourcing from a single iteration

```terraform
data "hcp_packer_iteration" "hardened-source" {
  bucket_name = "hardened-ubuntu-16-04"
  channel     = "production"
}

data "hcp_packer_image" "foo" {
  bucket_name    = "hardened-ubuntu-16-04"
  cloud_provider = "aws"
  iteration_id   = data.hcp_packer_iteration.hardened-source.ulid
  region         = "us-east-1"
}

data "hcp_packer_image" "bar" {
  bucket_name    = "hardened-ubuntu-16-04"
  cloud_provider = "aws"
  iteration_id   = data.hcp_packer_iteration.hardened-source.ulid
  region         = "us-west-1"
}

output "packer-registry-ubuntu-east-1" {
  value = data.hcp_packer_image.foo.cloud_image_id
}

output "packer-registry-ubuntu-west-1" {
  value = data.hcp_packer_image.bar.cloud_image_id
}
```

~> **Note:** This data source only returns the first found image's metadata filtered by the given arguments, from the returned list of images associated with the specified iteration. Therefore, if multiple images exist in the same region, it will only pick one of them. In this csae, you can filter images by a source build name (Ex: `amazon-ebs.example`) using the `component_type` optional argument.

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `bucket_name` (String) The slug of the HCP Packer Registry image bucket to pull from.
- `cloud_provider` (String) Name of the cloud provider this image is stored-in.
- `region` (String) Region this image is stored in, if any.

### Optional

- `channel` (String) The channel that points to the version of the image being retrieved. Either this or `iteration_id` must be specified. Note: will incur a billable request
- `component_type` (String) Name of the builder that built this image. Ex: `amazon-ebs.example`.
- `iteration_id` (String) The iteration from which to get the image. Either this or `channel` must be specified.
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `build_id` (String) HCP ID of this build.
- `cloud_image_id` (String) Cloud Image ID or URL string identifying this image for the builder that built it.
- `created_at` (String) Creation time of this build.
- `id` (String) The ID of this resource.
- `labels` (Map of String) Labels associated with this build.
- `organization_id` (String) The ID of the organization this HCP Packer registry is located in.
- `packer_run_uuid` (String) UUID of this build.
- `project_id` (String) The ID of the project this HCP Packer registry is located in.
- `revoke_at` (String) The revocation time of this build. This field will be null for any build that has not been revoked or scheduled for revocation.

<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `default` (String)

